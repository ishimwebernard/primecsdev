<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../css/aftersigninnew.css">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@100;300;500;600;700&display=swap" rel="stylesheet"> 

    <title>Document</title>
</head>
<body>
    <div class="content">
        <div class="backer" id="backer"></div>
        <div class="lessonOpened" id="lessonOpened">
            <div class="controls">
                <h2 class="lessonName" id="part">LESSON NAME</h2>
                <button onclick="closeSubject()">Close Subject</button>
            </div>
            <div class="main">
                <div class="lessonNavigator">
                    <p class="lessonNav" onclick="switchSubject(0)">Schedule Details</p>
                    <p class="lessonNav" onclick="switchSubject(1)">Download Files</p>
                    <p class="lessonNav" onclick="switchSubject(2)">Lecture Videos</p>
                </div>
                <div class="lessonMain" id="scheduleDetails">
                    <div class="indicator">
                        <p>Date</p>
                        <p>Chapter</p>
                        <p>Teacher</p>
                    </div>
                    <div class="scDetail">
                        <p class="scheduleDate">1-1-2000</p>
                        <p class="scheduleChapter">Mechanics of structures</p>
                        <p class="scheduleTeacher">Prince</p>
    
                    </div>
                    <div class="scDetail">
                        <p class="scheduleDate">1-3-2000</p>
                        <p class="scheduleChapter">Plane Trusses</p>
                        <p class="scheduleTeacher">Murara</p>
    
                    </div>
                    <div class="scDetail">
                        <p class="scheduleDate">1-5-2000</p>
                        <p class="scheduleChapter">Statistical indeterminacy of trusses</p>
                        <p class="scheduleTeacher">Murara</p>
    
                    </div>
                    <div class="scDetail">
                        <p class="scheduleDate">1-7-2000</p>
                        <p class="scheduleChapter">SMain types of trusses</p>
                        <p class="scheduleTeacher">Murara</p>
    
                    </div>
                </div>
                <div class="lessonMain" id="downloadFiles">
                    <div class="download">
                        <a href="">Integral Calculus</a>
                        <p class="downloadDetail">This is for you to get familiar with laplace transform</p>
                    </div>
                    <div class="download">
                        <a href="">Integral Calculus</a>
                        <p class="downloadDetail">This is for you to get familiar with laplace transform</p>
                    </div>
                    <div class="download">
                        <a href="">Integral Calculus</a>
                        <p class="downloadDetail">This is for you to get familiar with laplace transform</p>
                    </div>
                </div>
                <div class="lessonMain" id="lectureVideos">
                    <div class="video">
                        <p class="startLetter">T</p>
                        <p class="videoName">Theory Of Structures</p>
                    </div>
                    <div class="video">
                        <p class="startLetter">M</p>
                        <p class="videoName">Mechanics of Trusses</p>
                    </div>
                    <div class="video">
                        <p class="startLetter">S</p>
                        <p class="videoName">Shear Stress Diagrams</p>
                    </div>
                </div>
            </div>
          
        </div>
        <div class="row1">
            <div class="logoPart">
                <img src="./assets/images/logolearning.png" class="logo">
                <div class="textLogo">
                    <p class="mix">
                        <span class="a">A</span><span class="e">E</span><span class="c">C</span> 360 LEARNING INITIATIVE
                    </p>
                    <p class="linkandesc">
                       An Education and Leadership Division of <a href="https://www.myprimecs.com/">Primecs LLC</a>
                    </p>
                </div>
            </div>
           
                <div class="navigationItemsHolder">
                    <div class="trueContainer">
                  
                        <div class="navigatorItem" onclick="switchTabFor(1)">
                            <img src="../assets/images/home.png" alt="" onclick="switchTabFor(1)">
                            <p class="navigationText" onclick="switchTabFor(1)">DASHBOARD</p>
                        </div>
                        <div class="navigatorItem" onclick="switchTabFor(2)">
                            <img src="../assets/images/help.png" alt="">
                            <p class="navigationText">SUPPORT</p>
                        </div>
                        <div class="navigatorItem" onclick="switchTabFor(0)">
                            <img src="../assets/images/account.png" onclick="switchTabFor(0)" alt="">
                            <p class="navigationText" onclick="switchTabFor(0)">MY ACCOUNT</p>
                        </div>
                        <div class="navigatorItem">
                            <img src="../assets/images/out.png" onclick="logout()" alt="">
                            <p class="navigationText" onclick="logout()">SIGN OUT</p>
                        </div>
                    </div>
                </div>
           
        </div>
        <div class="row2">
           <div class="tab" id="profile">
            <h2>My Profile</h2>
            <div class="profilenavigator">
                <div class="leftnav">
                    <div class="navitem" onclick="switchNav(0)">
                        <img src="../assets/images/person_simple.png" alt="">
                        <p>User Information</p>
                    </div>
                    <div class="navitem" onclick="switchNav(1)">
                        <img src="../assets/images/contact_info.png" alt="">
                        <p>Contact information</p>
                    </div>
                    <div class="navitem" onclick="switchNav(2)">
                        <img src="../assets/images/course_info.png" alt="">
                        <p>Course/ Products</p>
                    </div>
                    <div class="navitem" onclick="switchNav(3)">
                        <img src="../assets/images/payment_info.png" alt="">
                        <p>Payment Information</p>
                    </div>
                </div>
                <div class="mainnav" id="userInformation">
                    <div class="profile"></div>
                    <div class="set">
                        <p class="identifier">Name</p>
                        <p class="value" id="name">Murara</p>
                    </div>
                    <div class="set">
                        <p class="identifier">Email ID</p>
                        <p class="value" id="email">Murara@mapl.com</p>
                    </div>
                    <button>Upload Profile Photo</button>
                </div>
                <div class="mainnav" id="contactInformation">
                   <section class="cinfo">
                        <h2>Mailing Address</h2>
                        <div class="InputPair">
                            <input type="text" placeholder="Addess Line 1" class="address">
                            <input type="text" placeholder="Addess Line 1" class="address">
                        </div>
                        <div class="InputPair">
                            <input type="text" placeholder="Addess Line 1" class="address">
                            <input type="text" placeholder="Addess Line 1" class="address">
                        </div>
                        <div class="InputPair">
                            <input type="text" placeholder="Addess Line 1" class="address">
                            <input type="text" placeholder="Addess Line 1" class="address">
                        </div>

                   </section>
                   <section>
                       <h2>Education</h2>
                       <div class="InputPair">
                        <input type="text" placeholder="Secondary Education" class="education">
                        <input type="text" placeholder="University Education" class="education">
                    </div>
                   </section>
                   <section>
                       <h2>Employment</h2>
                       <div class="InputPair">
                        <input type="text" placeholder="Employment Company" class="employment">
                        <input type="text" placeholder="Supervisors Address" class="employment">
                    </div>
                   </section>
                </div>
                <div class="mainnav" id="courseInformation">
                    <h2>Fall 2013 and Ever</h2>
                   <div class="superSet">
                    <!-- <div class="set">
                        <p class="identifier">Total Course Fee</p>
                        <p class="value">$1212</p>
                    </div> -->
                    <!-- <div class="set">
                        <p class="identifier">Depth Subject</p>
                        <select name="" id="">
                            <option value="">Math</option>
                            <option value="">Physics</option>
                            <option value="">Compt</option>
                        </select>
                    </div> -->
                   </div>
                </div>
                <div class="mainnav">
                    <table>
                        <tr>
                            <th>Type</th>
                            <th>Amount</th>
                            <th>Status</th>
                            <th>Receipt</th>
                        </tr>
                        <tr>
                            <td>Slip</td>
                            <td>$5000</td>
                            <td>Processed</td>
                            <td>Click Here</td>
                        </tr>
                    </table>
                </div>
            </div>
           </div>
           <div class="tab" id="dashboard">
                <h2>Dashboard</h2>
                
                <h3 class="subtitle">My Courses</h3>
                <div class="cardsContainer" id="yourCourses" >
                          
                
                </div>
           </div>
           <div class="tab" id="help">
               <div class="r1">
                   <p>Welcome to Primecs Education</p>
                   <div class="c">
                    <input type="text" placeholder="How can we help you?">
                    <button>Search</button>
                   </div>
               </div>
               <div class="trendingstuff">
                   <h1>Trending topics</h1>
                   <div class="topic-double">
                        <div class="topic">
                            <p class="title">Some kinda trending topic</p>
                            <p class="description">bfjvlbfjlvwjlfkbvjlkbew</p>
                        </div>
                        <div class="topic">
                            <p class="title">Some kinda trending topic</p>
                            <p class="description">bfjvlbfjlvwjlfkbvjlkbew</p>
                        </div>
                   </div>
                   <div class="topic-double">
                    <div class="topic">
                        <p class="title">Some kinda trending topic</p>
                        <p class="description">bfjvlbfjlvwjlfkbvjlkbew</p>
                    </div>
                    <div class="topic">
                        <p class="title">Some kinda trending topic</p>
                        <p class="description">bfjvlbfjlvwjlfkbvjlkbew</p>
                    </div>
               </div>
               <div class="topic-double">
                <div class="topic">
                    <p class="title">Some kinda trending topic</p>
                    <p class="description">bfjvlbfjlvwjlfkbvjlkbew</p>
                </div>
                <div class="topic">
                    <p class="title">Some kinda trending topic</p>
                    <p class="description">bfjvlbfjlvwjlfkbvjlkbew</p>
                </div>
           </div>
               </div>
           </div>
           <!-- <div class="tab" id="someSubject">
               <h2>Course Name</h2>
            <div class="profilenavigator">
                <div class="leftnav">
                    
                    <div class="navitem" onclick="">
                        <img src="../assets/images/person_simple.png" alt="">
                        <p>Schedule Infornation</p>
                    </div>
                    <div class="navitem" onclick="">
                        <img src="../assets/images/contact_info.png" alt="">
                        <p>Downloadable Files</p>
                    </div>
                    <div class="navitem" onclick="">
                        <img src="../assets/images/course_info.png" alt="">
                        <p>Lecture videos</p>
                    </div>
                   
                </div>
                
                
                <div class="courseNavigator">
                    
                        <div class="tableClassRecord">
                            <p class="endDate">End Date</p>
                            <p class="chapterName">Chapter Name</p>
                            <p class="lecturer">Some kinda Lecturer</p>
                            
                        </div>
                        <div class="tableClassRecord">
                            <p class="endDate">1-3-2000</p>
                            <p class="chapterName">Analyisis of stuctures</p>
                            <p class="lecturer">Prince</p>
                            
                        </div>
                </div>
                <div class="courseNavigator">
                    <div class="downloadFile">
                        <a href="somesome">Theory of computation</a>
                        <p class="teacher">Mr Bobby Wine</p>
                    </div>
                </div>
                <div class="courseNavigator">
                    <div class="video">
                        <a href="somesome">Theory of computation</a>
                        <p class="teacher">Mr Bobby Wine</p>
                    </div>
                </div>
                
            </div>
           </div> -->
        </div>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/latest/TimelineMax.min.js" integrity="sha512-lJDBw/vKlGO8aIZB8/6CY4lV+EMAL3qzViHid6wXjH/uDrqUl+uvfCROHXAEL0T/bgdAQHSuE68vRlcFHUdrUw==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/latest/TweenMax.min.js" integrity="sha512-8Wy4KH0O+AuzjMm1w5QfZ5j5/y8Q/kcUktK9mPUVaUoBvh3QPUZB822W/vy7ULqri3yR8daH3F58+Y8Z08qzeg==" crossorigin="anonymous"></script>
    <!-- <script src="../js/aftersignin.js"></script> -->

        <!-- The core Firebase JS SDK is always required and must be listed first -->
<script src="https://www.gstatic.com/firebasejs/8.1.1/firebase.js"></script>

<!-- TODO: Add SDKs for Firebase products that you want to use
     https://firebase.google.com/docs/web/setup#available-libraries -->
<script src="https://www.gstatic.com/firebasejs/8.1.1/firebase-analytics.js"></script>
    <script>
        // Your web app's Firebase configuration
        // For Firebase JS SDK v7.20.0 and later, measurementId is optional
        var firebaseConfig = {
          apiKey: "AIzaSyDV8mW8bweN6YOg0OKgRZ9umOVs_UUN-pA",
          authDomain: "primecs-1cbfc.firebaseapp.com",
          projectId: "primecs-1cbfc",
          storageBucket: "primecs-1cbfc.appspot.com",
          messagingSenderId: "33832366036",
          appId: "1:33832366036:web:cc0d5c26b3c1b4690ff041",
          measurementId: "G-ETGHB4KYQF"
        };
        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        firebase.analytics();
        var db = firebase.firestore();
        var userId;
        var courserBeingTaken;
        var globalUserId;
        let activeUser;



        switchNav(0);
        function switchNav(n){
            const mainnavs = document.getElementsByClassName('mainnav');
            for(let mainnav of mainnavs){
                mainnav.style.display="none";
            }
            mainnavs[n].style.display = "flex";
            animateMain(mainnavs[n]);
        }

        function animateMain(MAIN_PART){
            const TWEENTL = new TimelineMax();
            TWEENTL.fromTo(MAIN_PART, .35, {x: "100%"},{x:"0%"});
        }
        let counterFullCourses = 0;
        let coursesTaken = [];

         switchTabFor(1);
        loadUserClasses();
        populateUserImages();
        let yourCourses = document.getElementById('yourCourses');
        function loadUserClasses() {
            var enrolledPrograms = document.getElementById("enrolledPrograms");
            var cookies = document.cookie
                .split(';')
                .map(cookie => cookie.split('='))
                .reduce((accumulator, [key, value]) => ({
                    ...accumulator,
                    [key.trim()]: decodeURIComponent(value)
                }), {});

            console.log(`Starting retrieving`);
            console.log(cookies);
            document.cookie = "_hush="+userId;
            firebase.firestore().collection('activeUsers').get().then((snapshot)=>{
                snapshot.forEach((doc)=>{
                    if(doc.data().owner == cookies.nick){
                        coursesTaken.push(doc.data());
                        yourCourses.innerHTML += `
                        <div class="rectangle">
                        <h3>${doc.data().courseName}</h3>
                        <p class="from">From: ${doc.data().startDate}</p>
                        <p class="to">To: ${doc.data().expiryDate}</p>
                        <button onclick="openSubject()">Continue Course</button>
                    </div>
                        `;
                        counterFullCourses += 1;
                    }
                })
            })
        }

        function createCookie(uidLength) {
            document.cookie = `notallowed=` + String(uidLength == 0);
            location.href = `aec360p.html`;
            console.log(document.cookie);
            console.log(`Called`);
        }

        function switchTabFor(NUMBER){
            var tabs = document.getElementsByClassName("tab");
            for(let tab of tabs){
                tab.style.display = "none";
            }
            tabs[NUMBER].style.display = "block";
        }
        function logout(){
            firebase.auth().signOut().then(()=>{
                location.href = `signinup.html`;
            }).catch(err=>{

            })
        }

        function startAccountControlSession(){
            var parent = document.getElementById("accountcontrol");
            var child = document.getElementById("center");

            parent.style.display = "block";
            child.style.display = "flex";

        }
        function endAccountControlSession(){
            var parent = document.getElementById("accountcontrol");
            var child = document.getElementById("center");

            parent.style.display = "none";
            child.style.display = "none";

        }
        function populateUserImages(){
            firebase.storage().ref().child(String(userId)).getDownloadURL().then((url)=>{
                document.getElementById("userprofilepicture").style.backgroundImage = `url(${url});`;
                document.getElementById("userProfile").style.backgroundImage = `url(${url});`;
            }).catch(error=>{

            })
        }


        function exitClass(newClass) {
            var stringCourse = "";
            console.log(stringCourse);
            for( var i = 0; i < courserBeingTaken.length; i++){ 
                    if ( courserBeingTaken[i] === String(newClass)) { 
                        courserBeingTaken.splice(i, 1); 
                    }
            }
            
            for (let course of courserBeingTaken) {
                stringCourse += course + " ";
            }
            // document.getElementById("loader").style.display = "block";
            db.collection('users').doc(userId).set({
            courses: stringCourse
            }).then(() => {
            // document.getElementById("loader").style.display = "none";
            document.cookie = "nick="+userId;    
            location.href = `lessons.html`;
            });
            
        }
        function switchSubject(n){
            const mainnavs = document.getElementsByClassName('lessonMain');
            for(let mainnav of mainnavs){
                mainnav.style.display="none";
            }
            mainnavs[n].style.display = "flex";
            animateMain(mainnavs[n]);
        }
        function closeSubject(){
            document.getElementById('lessonOpened').style.display = 'none';
            document.getElementById('backer').style.display = 'none';
        }
        function openSubject(){
            document.getElementById('lessonOpened').style.display = 'block';
            document.getElementById('backer').style.display = 'block';
            switchSubject(0);
        }





         </script>
</body>
</html>